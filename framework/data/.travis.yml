python: "2.7"

matrix:
  include:
    - name: "Linux :: Python2.7"
      os: linux
      language: python
      env:
        - PYTHONPATH=/home/travis/.local/lib/python2.7/site-packages/:$PYTHONPATH
        - PATH=/home/travis/.local/bin/:$PATH
    - name: "OSX :: Python 2.7"
      os: osx
      language: generic
      env:  
        - PYTHONPATH=/users/travis/Library/Python/2.7/lib/site-packages/:$PYTHONPATH
        - PATH=/users/travis/Library/Python/2.7/bin/:$PATH

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew list python &>/dev/null || brew install python; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install pyenv-virtualenv; fi

install:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then pip install codecov; fi
  - pip install git+https://github.com/grand-mother/framework.git@master
  - python setup.py install --user --prefix=

script:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then coverage run tests; else python setup.py test; fi

after_success:
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then codecov; fi
